
<!DOCTYPE html>
<html lang="en" >
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme-color" content=#58b77a>
<title>Brushes &amp; Keys</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="Nan Chen">
<meta name="keywords" content="javascript web-devlopement photography">
<meta name="description" content="Personal blog tech & life">

<script id="hexo-configurations">
  var CONFIG = {
    root: '/',
    theme: 'lx',
    version: '0.3.9',
    localsearch:{
      "enable": false,
      "trigger": "auto",
      "top_n_per_article": 1,
      "unescape": false,
      "preload": false
      },
    path: '-'
  };
</script>

<link rel="shortcut icon" href="/bg.png">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/theme-lx@0.3.9/source/css/main.min.css">
<link rel="stylesheet" href="/css/mycss.css">
<style type="text/css">
  pre,
  code {
    font-family: 'Hind Siliguri',
      monospace;
  }

  html {
    font-family: sans-serif;
  }

  body {
    font-family: sans-serif;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  figure {
    font-family: Hind Siliguri;
  }

  .menu-container {
    font-family: sans-serif;
  }

</style>

<script src="//cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
<script src="//cdn.jsdelivr.net/npm/theme-lx@0.3.9/source/js/jquery.jside.menu.js"></script>
<script>
  $(document).ready(function () {
    $(".menu-container").jSideMenu({
      jSidePosition: "position-right",
      jSideSticky: true,
      jSideSkin: "greenish",
    });
  });

</script>

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Hind Siliguri:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css">
<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="page">

<div id="lx-aside" style="background-image: url(https://images.unsplash.com/photo-1557853197-aefb550b6fdc?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=750&q=80)">
  <div class="overlay">
    <div class="featured">
      <div class="avatar"><a href="/"><img src="https://avatars0.githubusercontent.com/u/26827800?s=460&u=59259f6cb361b7fba376e3ae0c589ccc1639c8b4&v=4"></a></div>
      <span>Nan Chen</span>
      <h1>Brushes & Keys</h1>
      <span>Coding-Baking Photos-Paints </span>
    <div class="social-links">
  <a href="https://github.com/southchen" target="_blank"><i
      class="fa fa-github fa-fw"></i></a>
  <a href="https://instagram.com/divetothesea" target="_blank"><i
      class="fa fa-instagram fa-fw"></i></a>
  <a href="https://www.behance.net/southchen" target="_blank"><i
      class="fa fa-behance fa-fw"></i></a>
</div>

  </div>
  </div>
</div>

<div id="lx-main-content">
  <div class="lx-post"> 

  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2020/05/25/inheritance-prototype/">A visual way to understand inheritance & prototype</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2020-05-25</span>
      <p><h2 id="A-visual-way-to-understand-inheritance-amp-prototype"><a href="#A-visual-way-to-understand-inheritance-amp-prototype" class="headerlink" title="A visual way to understand inheritance &amp; prototype"></a>A visual way to understand inheritance &amp; prototype</h2><p>In JavaScript, there is actually no concept of real Class (in es6, class is purely syntax sugar üç¨)</p>
<p>The inheritance was made by inheriting along the prototype chain. And it‚Äôs a real OOP language since you can create a new object directly from an object bypassing the class.</p>
<p>The keyword <code>new &lt;Constructor&gt;</code> and Object.create(<code>&lt;Prototype object&gt;</code>) method can both manuiplate the prototype chain (<code>__proto__</code>):</p>
<img src="/2020/05/25/inheritance-prototype/prototype-Page-2.png" alt="prototype-Page-2" style="zoom:50%;">

<p>the orange line refers to the prototype chain.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params">argu</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.con = argu;</span><br><span class="line">&#125;</span><br><span class="line">A.prototype.proto = <span class="function"><span class="params">()</span>=&gt;</span>&#123;<span class="built_in">console</span>.log(<span class="keyword">this</span>)&#125;</span><br><span class="line"><span class="keyword">let</span> a1 = <span class="built_in">Object</span>.create(A.prototype)</span><br><span class="line"><span class="keyword">let</span> a2 = <span class="keyword">new</span> A(<span class="string">'a2'</span>)</span><br><span class="line">a2.con <span class="comment">// 'a2'</span></span><br><span class="line">a1.con <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<p>the new keyword and the .create method both combine the returned object to the prototype of the constructor function. However, the new object a2 will inheritage the this.con property constructor (a function) while the a1 will not.</p>
<p>Both a1 and a2 have access to the .proto method by searching along the prototype chain.</p>
<p>A common mistakes when I first bump into the idea of inheritance I have made was accidentally create an object from a  constructor function rather than the prototype of the constructor.</p>
<img src="/2020/05/25/inheritance-prototype/prototype-Page-3.png" alt="prototype-Page-3" style="zoom:50%;">

<p>As the figure shown, the incorrectly created object a1now is an instance of function. And have no access to method of A.prototype.proto: </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a1 <span class="keyword">instanceof</span> <span class="built_in">Function</span> <span class="comment">//true</span></span><br><span class="line">a1.proto() <span class="comment">//a1.proto is not a function</span></span><br><span class="line">a1.prototype.proto() <span class="comment">//this works</span></span><br></pre></td></tr></table></figure>

<p>The prototype object can be only found on a function. An object other than function have no pointer referencing to prototype. </p></p>
      <div class="post-button"><a class="btn" href="/2020/05/25/inheritance-prototype/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2020/05/24/Leetcode-Linked-List/">Leetcode Linked List</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2020-05-24</span>
      <p><h1 id="Linked-List"><a href="#Linked-List" class="headerlink" title="Linked List"></a>Linked List</h1><div class="note warning">
            <h3 id="Disclaimer"><a href="#Disclaimer" class="headerlink" title="Disclaimer"></a>Disclaimer</h3><p>This article is originally based on my understanding of this concept. No guarantee on the accuracy.üòÖ</p>
          </div>



<p>Comparing with Array, linked list dosen‚Äôt support accessing by index. So for searching a certain element, the complexcity is O(n).</p>
<p>The linked list doesn‚Äôt took up continuous space in memory, so for inserting/deleting element, the complexcity is O(1)</p>
<p>Using two pointer can help to reduce the complexity.</p>
<p>For loop in the list, using fast and slow pointers.</p>
<h3 id="206-Reverse-Linked-List"><a href="#206-Reverse-Linked-List" class="headerlink" title="206. Reverse Linked List"></a><a href="https://leetcode-cn.com/problems/reverse-linked-list/" target="_blank" rel="noopener">206. Reverse Linked List</a></h3><p>Reverse a singly linked list.</p>
<blockquote>
<p>Example:<br>Input: 1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;NULL<br>Output: 5-&gt;4-&gt;3-&gt;2-&gt;1-&gt;NULL<br>Follow up:</p>
</blockquote>
<p>A linked list can be reversed either iteratively or recursively. Could you implement both?</p>
<ul>
<li><p>iterative</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reverseList = <span class="function"><span class="keyword">function</span> (<span class="params">head</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!head || !head.next) <span class="keyword">return</span> head;</span><br><span class="line">  <span class="keyword">let</span> pre = <span class="literal">null</span>,</span><br><span class="line">    cur = head;</span><br><span class="line">  <span class="keyword">while</span> (cur) &#123;</span><br><span class="line">    <span class="keyword">let</span> next = cur.next;</span><br><span class="line">    cur.next = pre;</span><br><span class="line">    pre = cur;</span><br><span class="line">    cur = next;</span><br><span class="line">  &#125;</span><br><span class="line">  head = pre;</span><br><span class="line">  <span class="keyword">return</span> head;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>recursive</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reverseList = <span class="function"><span class="keyword">function</span> (<span class="params">head</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!head || !head.next) <span class="keyword">return</span> head;</span><br><span class="line">  <span class="keyword">let</span> next = head.next;</span><br><span class="line">  <span class="keyword">let</span> reversedHead = reverseList(next);</span><br><span class="line">  head.next = <span class="literal">null</span>;</span><br><span class="line">  next.next = head;</span><br><span class="line">  <span class="keyword">return</span> reversedHead;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h3 id="21-Merge-Two-Sorted-Lists"><a href="#21-Merge-Two-Sorted-Lists" class="headerlink" title="21. Merge Two Sorted Lists"></a><a href="https://leetcode-cn.com/problems/merge-two-sorted-lists/" target="_blank" rel="noopener">21. Merge Two Sorted Lists</a></h3><p>Merge two sorted linked lists and return it as a new list. The new list should be made by splicing together the nodes of the first two lists.</p>
<blockquote>
<p>Example:<br>Input: 1-&gt;2-&gt;4, 1-&gt;3-&gt;4<br>Output: 1-&gt;1-&gt;2-&gt;3-&gt;4-&gt;4</p>
</blockquote>
<div class="css-hgmg3m-Container e1l4e1yy0"><img src="https://assets.leetcode-cn.com/solution-static/21/1.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/2.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/3.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/4.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/5.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/6.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/7.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/8.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/9.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/10.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/11.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/12.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/13.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/14.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/15.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/16.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/17.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/18.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/19.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/20.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/21.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/22.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/23.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/24.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/25.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/26.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/27.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/28.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/29.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/30.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/31.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/32.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/33.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/34.PNG" class="css-58ju5r-Img e1l4e1yy1"><img hidden src="https://assets.leetcode-cn.com/solution-static/21/35.PNG" class="css-58ju5r-Img e1l4e1yy1"></div>



<ul>
<li>iterative (two pointer)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mergeTwoLists = <span class="function"><span class="keyword">function</span> (<span class="params">l1, l2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> p = <span class="keyword">new</span> ListNode(<span class="number">-1</span>);<span class="comment">//dummy head</span></span><br><span class="line">  <span class="keyword">let</span> preHead = p;  <span class="comment">//store the dummy head!</span></span><br><span class="line">  <span class="keyword">while</span> (l1 &amp;&amp; l2) &#123;</span><br><span class="line">    <span class="keyword">if</span> (l1.val &gt;= l2.val) &#123;</span><br><span class="line">      p.next = l2;</span><br><span class="line">      l2 = l2.next;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      p.next = l1;</span><br><span class="line">      l1 = l1.next;</span><br><span class="line">    &#125;</span><br><span class="line">      p=p.next</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (l1) &#123; <span class="comment">//add the remaining list</span></span><br><span class="line">    p.next = l1;</span><br><span class="line">    l1 = l1.next;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (l2) &#123;</span><br><span class="line">    p.next = l2;</span><br><span class="line">    l2 = l2.next;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> preHead.next; <span class="comment">//dummy head's next is the first head</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>Recursive</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mergeTwoLists</span>(<span class="params">l1, l2</span>) </span>&#123; <span class="comment">//always compare two node</span></span><br><span class="line">    <span class="keyword">if</span>(l1 === <span class="literal">null</span>) &#123; <span class="comment">//if it reaches the end return the other node</span></span><br><span class="line">        <span class="keyword">return</span> l2</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(l2 === <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> l1</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(l1.val &lt;= l2.val) &#123; </span><br><span class="line">        l1.next = mergeTwoLists(l1.next, l2) <span class="comment">//let the next head point to the next result</span></span><br><span class="line">      <span class="comment">//pass the new head l1.next</span></span><br><span class="line">        <span class="keyword">return</span> l1  <span class="comment">//return the smaller one</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        l2.next = mergeTwoLists(l2.next, l1)   <span class="comment">//pass the new head l2.next</span></span><br><span class="line">        <span class="keyword">return</span> l2</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ul>
<p><img src="https://pic.leetcode-cn.com/a918cadaf04feddd5429bd4cdc9ef259cdcae6126e194e0284d86287a5ba3006.png" alt="img"></p>
<h3 id="160-Intersection-of-Two-Linked-Lists"><a href="#160-Intersection-of-Two-Linked-Lists" class="headerlink" title="160. Intersection of Two Linked Lists"></a><a href="https://leetcode-cn.com/problems/intersection-of-two-linked-lists/" target="_blank" rel="noopener">160. Intersection of Two Linked Lists</a></h3><p>Write a program to find the node at which the intersection of two singly linked lists begins.</p>
<blockquote>
<p>Input: intersectVal = 8,<br>listA = [4,1,8,4,5],<br>listB = [5,0,1,8,4,5],<br>skipA = 2, skipB = 3</p>
<p>Output: Reference of the node with value = 8<br>Input Explanation: The intersected node‚Äôs value is 8 (note that this must not be 0 if the two lists intersect). From the head of A, it reads as [4,1,8,4,5]. From the head of B, it reads as [5,0,1,8,4,5]. There are 2 nodes before the intersected node in A; There are 3 nodes before the intersected node in B.</p>
</blockquote>
<blockquote>
<p>Input: intersectVal = 2, listA = [0,9,1,2,4], listB = [3,2,4], skipA = 3, skipB = 1</p>
<p>Output: Reference of the node with value = 2<br>Input Explanation: The intersected node‚Äôs value is 2 (note that this must not be 0 if the two lists intersect). From the head of A, it reads as [0,9,1,2,4]. From the head of B, it reads as [3,2,4]. There are 3 nodes before the intersected node in A; There are 1 node before the intersected node in B.</p>
</blockquote>
<blockquote>
<p>Input: intersectVal = 0, listA = [2,6,4], listB = [1,5], skipA = 3, skipB = 2</p>
<p>Output: null<br>Input Explanation: From the head of A, it reads as [2,6,4]. From the head of B, it reads as [1,5]. Since the two lists do not intersect, intersectVal must be 0, while skipA and skipB can be arbitrary values.<br>Explanation: The two lists do not intersect, so return null.</p>
</blockquote>
<p><img src="https://pic.leetcode-cn.com/e86e947c8b87ac723b9c858cd3834f9a93bcc6c5e884e41117ab803d205ef662-%E7%9B%B8%E4%BA%A4%E9%93%BE%E8%A1%A8.png" alt="Áõ∏‰∫§ÈìæË°®.png"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getIntersectionNode = <span class="function"><span class="keyword">function</span> (<span class="params">headA, headB</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> pA = headA,</span><br><span class="line">    pB = headB;</span><br><span class="line">  <span class="keyword">while</span> (pA || pB) &#123;</span><br><span class="line">    <span class="keyword">if</span> (pA === pB) <span class="keyword">return</span> pA;</span><br><span class="line">    pA === <span class="literal">null</span> ? (pA = headB) : (pA = pA.next);</span><br><span class="line">    pB === <span class="literal">null</span> ? (pB = headA) : (pB = pB.next);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="141-Linked-List-Cycle"><a href="#141-Linked-List-Cycle" class="headerlink" title="141. Linked List Cycle"></a><a href="https://leetcode-cn.com/problems/linked-list-cycle/" target="_blank" rel="noopener">141. Linked List Cycle</a></h3><p>Given a linked list, determine if it has a cycle in it.</p>
<p>To represent a cycle in the given linked list, we use an integer pos which represents the position (0-indexed) in the linked list where tail connects to. If pos is -1, then there is no cycle in the linked list.</p>
<blockquote>
<p>Example 1:<br>Input: head = [3,2,0,-4], pos = 1<br>Output: true<br>Explanation: There is a cycle in the linked list, where tail connects to the second node.</p>
</blockquote>
<blockquote>
<p>Example 2:</p>
<p>Input: head = [1,2], pos = 0<br>Output: true<br>Explanation: There is a cycle in the linked list, where tail connects to the first node.</p>
</blockquote>
<blockquote>
<p>Example 3:</p>
<p>Input: head = [1], pos = -1<br>Output: false<br>Explanation: There is no cycle in the linked list.</p>
</blockquote>
<p>Follow up: Can you solve it using O(1) (i.e. constant) memory?</p>
<p>Use slow &amp; fast pointers:</p>
<p>Space complexity :O(1) Time complexcity: O(n)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> hasCycle = <span class="function"><span class="keyword">function</span>(<span class="params">head</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!head || !head.next) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> fast = head.next.next, slow = head</span><br><span class="line">    <span class="keyword">while</span>(fast !== slow) &#123;</span><br><span class="line">        <span class="keyword">if</span>(!fast || !fast.next) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        fast = fast.next.next</span><br><span class="line">        slow = slow.next</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Using the list to store a marker/flag to indicate if this node was traversed. </p>
<p>Space&amp;Time complexcity: O(N)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> hasCycle = <span class="function"><span class="keyword">function</span>(<span class="params">head</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(head) &#123;</span><br><span class="line">        <span class="keyword">if</span>(head.flag) <span class="keyword">return</span> <span class="literal">true</span> <span class="comment">//this list was marked</span></span><br><span class="line">        head.flag = <span class="literal">true</span></span><br><span class="line">        head = head.next</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="234-Palindrome-Linked-List"><a href="#234-Palindrome-Linked-List" class="headerlink" title="234. Palindrome Linked List"></a><a href="https://leetcode-cn.com/problems/palindrome-linked-list/" target="_blank" rel="noopener">234. Palindrome Linked List</a></h3><p>Given a singly linked list, determine if it is a palindrome.</p>
<blockquote>
<p>Example 1:</p>
<p>Input: 1-&gt;2<br>Output: false</p>
</blockquote>
<blockquote>
<p>Example 2:</p>
<p>Input: 1-&gt;2-&gt;2-&gt;1<br>Output: true</p>
</blockquote>
<p>Follow up: Could you do it in O(n) time and O(1) space?</p>
<p>Two pointer:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isPalindrome = <span class="function"><span class="keyword">function</span> (<span class="params">head</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!head || !head.next) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">if</span> (!head.next.next) &#123;</span><br><span class="line">    <span class="keyword">if</span> (head.val === head.next.val) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> slow = head,</span><br><span class="line">    fast = head.next.next;</span><br><span class="line">  <span class="keyword">while</span> (fast.next) &#123;</span><br><span class="line">    slow = slow.next;</span><br><span class="line">    fast = fast.next;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> reversed = slow.next; <span class="comment">//find the mid point </span></span><br><span class="line">  pre = <span class="literal">null</span>; <span class="comment">//reverse the last half</span></span><br><span class="line">  <span class="keyword">while</span> (reversed) &#123;</span><br><span class="line">    <span class="keyword">let</span> next = reversed.next;</span><br><span class="line">    reversed.next = pre;</span><br><span class="line">    pre = reversed;</span><br><span class="line">    reversed = next;</span><br><span class="line">  &#125;</span><br><span class="line">  reversed = pre; <span class="comment">//the reversed head</span></span><br><span class="line">  <span class="keyword">while</span> (reversed &amp;&amp; head) &#123; <span class="comment">//compare the two halfs</span></span><br><span class="line">    <span class="keyword">if</span> (reversed.val != head.val) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    reversed = reversed.next;</span><br><span class="line">    head = head.next;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>Using stack:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isPalindrome = <span class="function"><span class="keyword">function</span> (<span class="params">head</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> arr = [];</span><br><span class="line">  <span class="keyword">while</span> (head) &#123;</span><br><span class="line">    arr.push(head.val);</span><br><span class="line">    head = head.next;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">while</span> (arr.length &gt; <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (arr.pop() != arr.shift()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="148-Sort-List"><a href="#148-Sort-List" class="headerlink" title="148. Sort List"></a><a href="https://leetcode-cn.com/problems/sort-list/" target="_blank" rel="noopener">148. Sort List</a></h3><p>Sort a linked list in O(n log n) time using constant space complexity.</p>
<blockquote>
<p>Example 1:</p>
<p>Input: 4-&gt;2-&gt;1-&gt;3<br>Output: 1-&gt;2-&gt;3-&gt;4</p>
</blockquote>
<blockquote>
<p>Example 2:</p>
<p>Input: -1-&gt;5-&gt;3-&gt;4-&gt;0<br>Output: -1-&gt;0-&gt;3-&gt;4-&gt;5</p>
</blockquote>
<p>Merge sorting:</p>
<p>It‚Äôs easy to just apply the <a href="https://southchen.github.io/2020/05/21/Template-for-Divided-Conquer-Algorithm/" target="_blank" rel="noopener">Divided Conqure algorithm template</a> üòÅ</p></p>
      <div class="post-button"><a class="btn" href="/2020/05/24/Leetcode-Linked-List/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2020/05/21/Template-for-Divided-Conquer-Algorithm/">Template for Divided Conquer Algorithm</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2020-05-21</span>
      <p><div class="note warning">
            <h3 id="Disclaimer"><a href="#Disclaimer" class="headerlink" title="Disclaimer"></a>Disclaimer</h3><p>This article is originally based on my understanding of this concept. No guarantee on the accuracy.üòÖ</p>
          </div>

<p><strong><code>Template:</code></strong></p>
<ul>
<li><p>1.base case</p>
</li>
<li><p>2.split to smaller sacle </p>
<p>(directly slice from the array otherwise maintain the index, and dynamically updated every call)</p>
</li>
<li><p>3.recursion</p>
</li>
<li><p>4.combination </p>
<p>(define the combination function and pass the returned value from recursion as parameter)</p>
</li>
</ul>
<p>Let‚Äôs see the examples from easy to moderate</p>
<h2 id="üåü-Search-the-max-amp-min-value"><a href="#üåü-Search-the-max-amp-min-value" class="headerlink" title="üåü Search the max&amp;min value"></a>üåü Search the max&amp;min value</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">searchMaxMin</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">      <span class="comment">//the base case</span></span><br><span class="line">        <span class="keyword">if</span> (arr.length &lt;= <span class="number">2</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> [<span class="built_in">Math</span>.max(...arr), <span class="built_in">Math</span>.min(...arr)];</span><br><span class="line">        &#125;</span><br><span class="line">      <span class="comment">//split</span></span><br><span class="line">        <span class="keyword">var</span> mid = arr.length / <span class="number">2</span> - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">let</span> left = arr.slice(<span class="number">0</span>, mid + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">let</span> right = arr.slice(mid + <span class="number">1</span>, arr.length);</span><br><span class="line">      <span class="comment">//recursion</span></span><br><span class="line">        <span class="keyword">var</span> sortedLeft = searchMaxMin(left);</span><br><span class="line">        <span class="keyword">var</span> sortedRight = searchMaxMin(right);</span><br><span class="line"><span class="comment">//combination function</span></span><br><span class="line">         <span class="keyword">const</span> combine = <span class="function">(<span class="params">left, right</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">var</span> result = [];</span><br><span class="line">          result[<span class="number">0</span>] = left[<span class="number">0</span>] &gt; right[<span class="number">0</span>] ? left[<span class="number">0</span>] : right[<span class="number">0</span>];</span><br><span class="line">          result[<span class="number">1</span>] = left[<span class="number">1</span>] &gt; right[<span class="number">1</span>] ? right[<span class="number">1</span>] : left[<span class="number">1</span>];</span><br><span class="line">          <span class="keyword">return</span> result;</span><br><span class="line">        &#125;;</span><br><span class="line"><span class="comment">//combine the returned value</span></span><br><span class="line">        <span class="keyword">return</span> combine(sortedLeft, sortedRight);</span><br><span class="line">      &#125;</span><br><span class="line">searchMaxMin([<span class="number">11</span>,<span class="number">2</span>,<span class="number">34</span>,<span class="number">0</span>,<span class="number">55</span>,<span class="number">11</span>])</span><br></pre></td></tr></table></figure>



<h2 id="üåüüåü-Merge-Sorting"><a href="#üåüüåü-Merge-Sorting" class="headerlink" title="üåüüåü Merge Sorting"></a>üåüüåü Merge Sorting</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mergeSort=<span class="function"><span class="params">arr</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="comment">//the edge case</span></span><br><span class="line">    <span class="keyword">if</span>(arr.length&lt;<span class="number">2</span>) <span class="keyword">return</span> arr;</span><br><span class="line">     <span class="comment">//split into smaller pieces</span></span><br><span class="line">    <span class="keyword">let</span> mid=<span class="built_in">Math</span>.floor(arr.length/<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">let</span> left=arr.slice(<span class="number">0</span>,mid),right=arr.slice(mid);</span><br><span class="line">   <span class="comment">//recursion</span></span><br><span class="line">    <span class="keyword">let</span> sortedLeft = mergeSort(left),sortedRight=(mergeSort(right));</span><br><span class="line">    <span class="comment">//combination function</span></span><br><span class="line">    <span class="keyword">const</span> merge=<span class="function">(<span class="params">left,right</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> res=[];</span><br><span class="line">    <span class="keyword">while</span>(left.length&amp;&amp;right.length)&#123;</span><br><span class="line">        <span class="keyword">if</span>(left[<span class="number">0</span>]&lt;=right[<span class="number">0</span>])&#123;</span><br><span class="line">            res.push(left.shift());</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            res.push(right.shift());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(left.length)&#123;</span><br><span class="line">        res.push(left.shift());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(right.length)&#123;</span><br><span class="line">        res.push(right.shift());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br><span class="line">    <span class="comment">//combine the returned value</span></span><br><span class="line">    <span class="keyword">return</span> merge(sortedLeft,sortedRight);</span><br><span class="line">&#125;;</span><br><span class="line">mergeSort([<span class="number">3</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">2</span>]);</span><br></pre></td></tr></table></figure>

<p>The call-stack would run in this sequence:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">merge(mergesort(<span class="number">3</span>,<span class="number">1</span>),mergersort(<span class="number">5</span>,<span class="number">0</span>,<span class="number">2</span>))</span><br><span class="line">merge(mergesort(<span class="number">3</span>),mergersort(<span class="number">1</span>))</span><br><span class="line">merge(left<span class="number">-3</span>,right<span class="number">-1</span>)</span><br><span class="line">merge(mergesort(<span class="number">5</span>),mergersort(<span class="number">0</span>,<span class="number">2</span>))</span><br><span class="line">merge(mergesort(<span class="number">0</span>),mergersort(<span class="number">2</span>))</span><br><span class="line">merge(left<span class="number">-0</span>,right<span class="number">-2</span>)</span><br><span class="line">merge(left<span class="number">-5</span>,right<span class="number">-0</span>,<span class="number">2</span>)</span><br><span class="line">merge(left<span class="number">-1</span>,<span class="number">3</span>,right<span class="number">-0</span>,<span class="number">2</span>,<span class="number">5</span>)</span><br></pre></td></tr></table></figure>



<h2 id="üåüüåü-Quick-Sorting"><a href="#üåüüåü-Quick-Sorting" class="headerlink" title="üåüüåü Quick Sorting"></a>üåüüåü Quick Sorting</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quick</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//the base case</span></span><br><span class="line">        <span class="keyword">if</span> (nums.length &lt;= <span class="number">1</span>) <span class="keyword">return</span> nums;</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">let</span> mid = <span class="built_in">Math</span>.floor(nums.length / <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">let</span> pivot = nums.splice(mid, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">let</span> left = [],</span><br><span class="line">          right = [];</span><br><span class="line">    <span class="comment">//break into two smaller array;</span></span><br><span class="line">        <span class="keyword">for</span> (num <span class="keyword">of</span> nums) &#123;</span><br><span class="line">          <span class="keyword">if</span> (num &lt; pivot) left.push(num);</span><br><span class="line">          <span class="keyword">if</span> (num &gt;= pivot) right.push(num);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="comment">//recursively pass the smaller sacle</span></span><br><span class="line">    <span class="keyword">let</span> sortedLeft =quick(left); </span><br><span class="line">    <span class="keyword">let</span> sortedRight = quick(right);</span><br><span class="line">    <span class="comment">//combine the returned result</span></span><br><span class="line">   <span class="keyword">return</span> [...sortedLeft, ...pivot, ...sortedRight]; </span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>



<h2 id="üåüüåü-169-Majority-Element"><a href="#üåüüåü-169-Majority-Element" class="headerlink" title="üåüüåü 169. Majority Element"></a>üåüüåü <a href="https://leetcode-cn.com/problems/majority-element/" target="_blank" rel="noopener">169. Majority Element</a></h2></p>
      <div class="post-button"><a class="btn" href="/2020/05/21/Template-for-Divided-Conquer-Algorithm/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2020/05/16/Understanding-Promise-part-2/">Understanding Promise part 2</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2020-05-16</span>
      <p><div class="note warning">
            <h3 id="Disclaimer"><a href="#Disclaimer" class="headerlink" title="Disclaimer"></a>Disclaimer</h3><p>This article is originally based on my understanding of this concept. No guarantee on the accuracy.üòÖ</p>
          </div>

<p>‚ÄòThe <strong><code>Promise</code></strong> object represents the eventual completion (or failure) of an asynchronous operation, and its resulting value.‚Äô</p>
<p>It was introduced to handle asynchronous operation like synchronous opeartion and avoid the callback hell.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">doSomething(<span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;</span><br><span class="line">  doSomethingElse(result, <span class="function"><span class="keyword">function</span>(<span class="params">newResult</span>) </span>&#123;</span><br><span class="line">    doThirdThing(newResult, <span class="function"><span class="keyword">function</span>(<span class="params">finalResult</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'Got the final result: '</span> + finalResult);</span><br><span class="line">    &#125;, failureCallback);</span><br><span class="line">  &#125;, failureCallback);</span><br><span class="line">&#125;, failureCallback);</span><br></pre></td></tr></table></figure>

<p>Common asynchronous-operation</p>
<ul>
<li>setTimeOut, setInterval</li>
<li>XHR request (fetch api)</li>
<li>Event Listening</li>
</ul>
<p>Thansk to promise‚Äôs .then() chaining, we can put the callback outsideÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">doSomething()</span><br><span class="line">.then(<span class="function"><span class="params">result</span> =&gt;</span> doSomethingElse(result))</span><br><span class="line">.then(<span class="function"><span class="params">newResult</span> =&gt;</span> doThirdThing(newResult))</span><br><span class="line">.then(<span class="function"><span class="params">finalResult</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Got the final result: <span class="subst">$&#123;finalResult&#125;</span>`</span>);</span><br><span class="line">&#125;)</span><br><span class="line">.catch(failureCallback);<span class="comment">//error handler for all above!</span></span><br></pre></td></tr></table></figure>

<p>*<em>This all based on modern API that returning a promise. That is to say, the promise chains starts with an API function  which returns a promise. *</em></p>
<p>We can create our own promise as well. Although it‚Äôs not typical practice but it can be helpful to ‚Äòpromisify‚Äô some old callback-style API then chain the handler. </p>
<p>Let‚Äôs look at how a promise is created. </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(</span><br><span class="line">  <span class="comment">//executor which runs immediately/sync:</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'sync!'</span>)</span><br><span class="line">  (res, rej)=&gt;&#123;</span><br><span class="line">    <span class="comment">// asynchronous operation. they will be put into the task queue</span></span><br><span class="line">    <span class="comment">//instead of returning something, it calls the callback as sideeffect to pass the result of asyn operation to res()/rej()</span></span><br><span class="line">    <span class="keyword">if</span>(somecodition) res(result); <span class="comment">//once the promise is settled the state won't be changed</span></span><br><span class="line">    rej(error)</span><br><span class="line">    <span class="comment">//then the res()/rej() can pass the result to the ousdie by chaining a .then()/.catch()</span></span><br><span class="line">&#125; </span><br><span class="line">  <span class="comment">//the construcor return the new promise obj (of course)</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>An example of wrapping a callback-style function with Promise:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> wait = <span class="function"><span class="params">ms</span> =&gt;</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> setTimeout(resolve, ms));</span><br><span class="line"></span><br><span class="line">wait(<span class="number">10000</span>).then(<span class="function"><span class="params">()</span> =&gt;</span> saySomething(<span class="string">"10 seconds"</span>)).catch(failureCallback);</span><br></pre></td></tr></table></figure></p>
      <div class="post-button"><a class="btn" href="/2020/05/16/Understanding-Promise-part-2/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2020/05/16/Understanding-Promise/">Understanding Promise part 1</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2020-05-16</span>
      <p><div class="note warning">
            <h3 id="Disclaimer"><a href="#Disclaimer" class="headerlink" title="Disclaimer"></a>Disclaimer</h3><p>This article is originally based on my understanding of this concept. No guarantee on the accuracy.üòÖ</p>
          </div>

<p>Starting from a puzzle from <a href="https://pouchdb.com/2015/05/18/we-have-a-problem-with-promises.html" target="_blank" rel="noopener">this article</a>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">doSomething().then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> doSomethingElse();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">doSomething().then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  doSomethingElse();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">doSomething().then(doSomethingElse());</span><br><span class="line"></span><br><span class="line">doSomething().then(doSomethingElse);</span><br><span class="line"><span class="comment">//note doSomething() and doSomethingElse() return a resolved promise</span></span><br></pre></td></tr></table></figure>

<p>How would this code run?</p>
<h3 id="To-answer-this-puzzle-a-few-key-points-should-be-understood"><a href="#To-answer-this-puzzle-a-few-key-points-should-be-understood" class="headerlink" title="To answer this puzzle, a few key points should be understood:"></a>To answer this puzzle, a few key points should be understood:</h3><ul>
<li><p>.then(callback) would ounly be put into the <strong>task queue</strong> when the chained promise was settled (fullfulled/resolved or rejected).</p>
</li>
<li><p>.then(callback) would pass the value returned from the callback to following .then/.catch</p>
<ul>
<li><p>If there is no explicit return of the callback, returns undefined</p>
</li>
<li><p>If the callback returns a promise as well, the following .then()/.catch() would be thrown into the task queue, when it‚Äôs settled. After the current stack is cleaned, they would be pushed to the stack (run the callback). Even a promise has already settled, the .then() still runs asynchronously. </p>
<ul>
<li><pre><code class="js"><span class="keyword">let</span> p = <span class="built_in">Promise</span>.resolve(<span class="string">'resolved already'</span>)
p.then(<span class="function"><span class="params">v</span>=&gt;</span>{<span class="built_in">console</span>.loe(<span class="string">'async result: '</span>=v)})
<span class="built_in">console</span>.log(<span class="string">'cleaning stack'</span>)
<span class="comment">//print 'cleaning stack' 'async result: resolved already'</span>
&lt;!--Ôøº<span class="number">1</span>--&gt;</code></pre>
</li>
</ul>
</li>
<li><p>if the callback returns a normal variable, the variable would be passed, and the state will be set to <strong>resolved</strong>.</p>
<ul>
<li><p>a corner-case: if the callback returns obj which has a ‚Äòthen‚Äô method, the following then() would run as the code in ‚Äòthen‚Äô method.</p>
</li>
<li><pre><code class="js"> <span class="built_in">Promise</span>.resolve({<span class="attr">value</span>: <span class="number">1</span>,
                  then: <span class="function"><span class="keyword">function</span> (<span class="params">resolve</span>) </span>{ <span class="comment">//the following then call this function</span>
                      <span class="built_in">console</span>.log(<span class="keyword">this</span>.value) <span class="comment">//print 1.</span>
                      resolve(<span class="string">'then method in object'</span>) 
                    <span class="comment">//resolve (or reject) function is a mustÔºåotherwise the following then would not be called, pending</span>
                  })
           .then(<span class="function"><span class="params">value</span> =&gt;</span> {
              <span class="built_in">console</span>.log(<span class="string">'the result from pre .then:'</span> + value); <span class="comment">//print 'the result form pre .then: then method in object'</span>
              }
          })
&lt;!--Ôøº<span class="number">2</span>--&gt;</code></pre>
</li>
</ul>
</li>
<li><p><strong>But actually this is against the design of Promise whose aim is to avoid callback style but to chain the async exceutor outside the previous one. So it‚Äôd better update to this:</strong></p></li></ul></li></ul></p>
      <div class="post-button"><a class="btn" href="/2020/05/16/Understanding-Promise/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>


<div id="pagination">
  <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"></a>
</div>

<footer>
  <div>
    Copyright &copy; 2020<a href="/"> Brushes & Keys</a><br>Powered by <a
      href="https://hexo.io" target="_blank">Hexo</a> | Theme <a href="https://lx.js.org" target="_blank">Lx</a> |
    Modified by
    Nan Chen <br> Find me at <a href="https://github.com/southchen" target="_blank" rel="noopener">GitHub</a> <a
      href="https://instagram.com/divetothesea">Instagram</a> <a href="https://www.behance.net/southchen" target="_blank" rel="noopener">Behance</a>
    <br>
  </div>
</footer>

  </div>
</div>
</div>

  <button class="hamburger hamburger--arrow-r" type="button">
    <div class="hamburger-box">
      <div class="hamburger-inner"></div>
    </div>
  </button>
  <div class="menu visibility">
  <div class="menu-head">
    <span class="layer">
      <div class="col">
        <div class="row for-pic">
          <div class="profile-pic">
            <a href="/"><img src="https://avatars0.githubusercontent.com/u/26827800?s=460&u=59259f6cb361b7fba376e3ae0c589ccc1639c8b4&v=4" alt="Nan Chen"/></a>
          </div>
        </div>
        <div class="row for-name">
          <p>Nan Chen</p>
          <span class="tagline">Not a Number üòÜ</span>
        </div>
      </div>
    </span>
  </div>
  <nav class="menu-container">
  <ul class="menu-items">
    <li><a href="/"><i class="fa fa-home fa-fw"></i>Home</a></li>
    <li><a href="/archives/"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
    
    <li class="has-sub"><span class="dropdown-heading">
      <i class="fa fa-bookmark fa-fw"></i>Pages</span>
        <ul>
          <li><a href="/about">About</a></li>
        </ul>
    </li>
    <li class="has-sub"><span class="dropdown-heading">
      <i class="fa fa-link fa-fw"></i>Friends</span>
        <ul>
          <li> <a href="https://lx.js.org" target="_blank">Theme-Lx</a></li>
        </ul>
    </li>
  </ul>
  </nav>
</div>

  <div class="gototop js-top">
    <a href="#" class="js-gotop"><i class="fa fa-arrow-up"></i></a>
  </div>
  <script src="//cdn.jsdelivr.net/npm/theme-lx@0.3.9/source/js/jquery.easing.min.js"></script>
  <script>
    (function () {
      "use strict";
      var goToTop = function () {
        $(".js-gotop").on("click", function (event) {
          event.preventDefault();
          $("html, body").animate({
            scrollTop: $("html").offset().top
          }, 500, "easeInOutExpo");
          return false;
        });
        $(window).scroll(function () {
          var $win = $(window);
          if ($win.scrollTop() > 200) {
            $(".js-top").addClass("active");
          } else {
            $(".js-top").removeClass("active");
          }
        });
      };
      $(function () {
        goToTop();
      });
    }());

  </script>
  


</body>

</html>
