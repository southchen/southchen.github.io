
<!DOCTYPE html>
<html lang="en" >
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme-color" content=#58b77a>
<title>Brushes &amp; Keys</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="Nan Chen">
<meta name="keywords" content="javascript web-devlopement photography">
<meta name="description" content="Personal blog tech & life">

<script id="hexo-configurations">
  var CONFIG = {
    root: '/',
    theme: 'lx',
    version: '0.3.9',
    localsearch:{
      "enable": false,
      "trigger": "auto",
      "top_n_per_article": 1,
      "unescape": false,
      "preload": false
      },
    path: '-'
  };
</script>

<link rel="shortcut icon" href="/bg.png">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/theme-lx@0.3.9/source/css/main.min.css">
<link rel="stylesheet" href="/css/mycss.css">
<style type="text/css">
  pre,
  code {
    font-family: 'Hind Siliguri',
      monospace;
  }

  html {
    font-family: sans-serif;
  }

  body {
    font-family: sans-serif;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  figure {
    font-family: Hind Siliguri;
  }

  .menu-container {
    font-family: sans-serif;
  }

</style>

<script src="//cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
<script src="//cdn.jsdelivr.net/npm/theme-lx@0.3.9/source/js/jquery.jside.menu.js"></script>
<script>
  $(document).ready(function () {
    $(".menu-container").jSideMenu({
      jSidePosition: "position-right",
      jSideSticky: true,
      jSideSkin: "greenish",
    });
  });

</script>

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Hind Siliguri:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css">
<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="page">

<div id="lx-aside" style="background-image: url(https://images.unsplash.com/photo-1557853197-aefb550b6fdc?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=750&q=80)">
  <div class="overlay">
    <div class="featured">
      <div class="avatar"><a href="/"><img src="https://avatars0.githubusercontent.com/u/26827800?s=460&u=59259f6cb361b7fba376e3ae0c589ccc1639c8b4&v=4"></a></div>
      <span>Nan Chen</span>
      <h1>Brushes & Keys</h1>
      <span>Coding-Baking Photos-Paints </span>
    <div class="social-links">
  <a href="https://github.com/southchen" target="_blank"><i
      class="fa fa-github fa-fw"></i></a>
  <a href="https://instagram.com/divetothesea" target="_blank"><i
      class="fa fa-instagram fa-fw"></i></a>
  <a href="https://www.behance.net/southchen" target="_blank"><i
      class="fa fa-behance fa-fw"></i></a>
</div>

  </div>
  </div>
</div>

<div id="lx-main-content">
  <div class="lx-post"> 

  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2020/08/12/Promise-A/">Promise A+</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2020-08-12</span>
      <p><div class="note warning">
            <h3 id="Disclaimer"><a href="#Disclaimer" class="headerlink" title="Disclaimer"></a>Disclaimer</h3><p>This article is originally based on my understanding of this concept. No guarantee on the accuracy.😅</p>
          </div>

<p>[toc]</p>
<h1 id="Promise-A-step-by-step"><a href="#Promise-A-step-by-step" class="headerlink" title="Promise A+ step by step"></a>Promise A+ step by step</h1><p><a href="https://promisesaplus.com/" target="_blank" rel="noopener">https://promisesaplus.com/</a></p>
<p>A promise represents the eventual result of an asynchronous operation</p>
<h2 id="State-Machine"><a href="#State-Machine" class="headerlink" title="State Machine"></a>State Machine</h2><p>States: ‘pending’;’fulfilled’;’rejected’;</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> PENDING = <span class="string">'pending'</span>;</span><br><span class="line"><span class="keyword">const</span> FULFILLED = <span class="string">'fulfilled'</span>;</span><br><span class="line"><span class="keyword">const</span> REJECTED = <span class="string">'rejected'</span>;</span><br></pre></td></tr></table></figure>

<h2 id="executor"><a href="#executor" class="headerlink" title="executor"></a>executor</h2><p>executor will be executed immediately, it takes two function as parameters</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Promise</span>(<span class="params">executor</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.state = PENDING;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">resolve</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    <span class="title">function</span> <span class="title">reject</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    //<span class="title">executor</span>(<span class="params">resolve, reject</span>);</span></span><br><span class="line"><span class="function">    //<span class="title">user</span> <span class="title">input</span> <span class="title">the</span> <span class="title">executor</span>, <span class="title">which</span> <span class="title">may</span> <span class="title">cause</span> <span class="title">error</span>, <span class="title">wrap</span> <span class="title">it</span> <span class="title">with</span> <span class="title">try</span> <span class="title">and</span> <span class="title">catch</span></span></span><br><span class="line"><span class="function">      <span class="title">try</span></span>&#123;</span><br><span class="line">          <span class="comment">//the executor would synchronously run using the resolve and reject function created in the constructor</span></span><br><span class="line">        executor(resolve, reject);</span><br><span class="line">    &#125;<span class="keyword">catch</span>(error)&#123;</span><br><span class="line">        reject(error);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="resolve-amp-reject-function"><a href="#resolve-amp-reject-function" class="headerlink" title="resolve &amp; reject function"></a>resolve &amp; reject function</h2><p>these two function are to </p>
<ul>
<li>pass the async results outside for chaining which avoids <code>nested callback</code> </li>
<li>change the state of current promise instance;</li>
</ul>
<p>Only when the state is PENDING, a transition can be made;</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> resolve=<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.state === PENDING)&#123;</span><br><span class="line">            <span class="keyword">this</span>.state = FULFILLED;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="then"><a href="#then" class="headerlink" title="then"></a>then</h2><h3 id="chain-revoke-gt-Promise-prototype-then-onRes-onRej"><a href="#chain-revoke-gt-Promise-prototype-then-onRes-onRej" class="headerlink" title="chain revoke =&gt;  Promise.prototype.then(onRes,onRej)"></a>chain revoke =&gt;  Promise.prototype.then(onRes,onRej)</h3><p>Methods in <code>then</code> can obtain the value passed from the promise instance =&gt; use <code>this</code> =&gt;pass the value/reason out by passing them into the resolve/rejection function</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.prototype.then = <span class="function"><span class="keyword">function</span>(<span class="params">onFulfilled, onRejected</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//check if onFuillfilled and onRejected are functions</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.state === FULFILLED)&#123; <span class="comment">//it must be called after promise is fulfilled, with promise’s value as its first argument.</span></span><br><span class="line">        <span class="keyword">typeof</span> onFulfilled === <span class="string">'function'</span> &amp;&amp; onFulfilled(<span class="keyword">this</span>.value);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.state === REJECTED)&#123;<span class="comment">//it must be called after promise is rejected, with promise’s reason as its first argument.</span></span><br><span class="line">        <span class="keyword">typeof</span> onRejected === <span class="string">'function'</span> &amp;&amp; onRejected(<span class="keyword">this</span>.reason);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//constructor:</span></span><br><span class="line">  <span class="keyword">const</span> resolve=<span class="function">(<span class="params">value</span>)=&gt;</span> &#123;</span><br><span class="line">   <span class="keyword">if</span>(<span class="keyword">this</span>.state === PENDING)&#123;</span><br><span class="line">            <span class="keyword">this</span>.state = FULFILLED;</span><br><span class="line">       <span class="comment">//so the value was attached to the promise instance</span></span><br><span class="line">       <span class="comment">//.then can recieve the value</span></span><br><span class="line">            <span class="keyword">this</span>.value = value;</span><br><span class="line">        &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> resolve=<span class="function">(<span class="params">reason</span>)=&gt;</span> &#123;</span><br><span class="line">   <span class="keyword">if</span>(<span class="keyword">this</span>.state === PENDING)&#123;</span><br><span class="line">            <span class="keyword">this</span>.state = FULFILLED;</span><br><span class="line">            <span class="keyword">this</span>.reason = reason;</span><br><span class="line">        &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h3 id="then-returns-a-new-promise-instance"><a href="#then-returns-a-new-promise-instance" class="headerlink" title="then() returns a new promise instance"></a>then() returns a new promise instance</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;&#125;)</span><br><span class="line"><span class="keyword">return</span> promise2;</span><br></pre></td></tr></table></figure>

<p>the new promise instance, can keep calling <code>then</code> on itself and pass the previous value/reason to the next <code>then</code> by passing it to the resolve and reject functions of itself.</p>
<blockquote>
<p>If <code>onFulfilled</code> is not a function and <code>promise1</code> is fulfilled, <code>promise2</code> must be fulfilled with the same value as <code>promise1</code>.</p>
<p>If <code>onRejected</code> is not a function and <code>promise1</code> is rejected, <code>promise2</code> must be rejected with the same reason as <code>promise1</code>.</p>
</blockquote>
<p>the result (value/reson) should ‘penetrate’ to the next then. </p>
<p>Providing a default function: (value)=&gt;value</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">onFulfilled = <span class="keyword">typeof</span> onFulfilled === <span class="string">'function'</span> ? onFulfilled : <span class="function"><span class="params">value</span> =&gt;</span> value;</span><br><span class="line">onRejected = <span class="keyword">typeof</span> onRejected === <span class="string">'function'</span> ? onRejected : <span class="function"><span class="params">reason</span> =&gt;</span> &#123; <span class="keyword">throw</span> reason &#125;;</span><br></pre></td></tr></table></figure>

<p>so when onFulfilled /onRejected are not function , promise2:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">//let x=onFulfilled(this.value)==&gt;this.value</span></span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">this</span>.state === FULFILLED)&#123;resolve(x)&#125;</span><br><span class="line"><span class="comment">//let x = onRejected(this.reason)==&gt;this.reason</span></span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">this</span>.state === REJECTED)&#123;reject(x)&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.state === FULFILLED)&#123; <span class="comment">//state of </span></span><br><span class="line">            <span class="keyword">let</span> x = onFulfilled(<span class="keyword">this</span>.value);</span><br><span class="line">            <span class="comment">//for next `then`</span></span><br><span class="line">            resolve(x);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.state === REJECTED)&#123;</span><br><span class="line">            <span class="keyword">let</span> x = onRejected(<span class="keyword">this</span>.reason);</span><br><span class="line">            reject(x);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.state === PENDING)&#123;</span><br><span class="line">            <span class="comment">// TODO</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"> <span class="keyword">return</span> promise2;</span><br></pre></td></tr></table></figure></p>
      <div class="post-button"><a class="btn" href="/2020/08/12/Promise-A/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2020/06/15/es6ds/">es6ds</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2020-06-15</span>
      <p><h1 id="ES6-Data-Type"><a href="#ES6-Data-Type" class="headerlink" title="ES6 Data Type"></a>ES6 Data Type</h1><div class="note warning">
            <h3 id="Disclaimer"><a href="#Disclaimer" class="headerlink" title="Disclaimer"></a>Disclaimer</h3><p>This article is originally based on my understanding of this concept. No guarantee on the accuracy.😅</p>
          </div>

<p>A summary of data type that introduced in ES6.</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Symbol</th>
<th>Map</th>
<th>Set</th>
</tr>
</thead>
<tbody><tr>
<td>Summary</td>
<td>Unique ‘string’</td>
<td>Ordered ‘object’ whose key can be primitive &amp; reference</td>
<td>‘Array’ with all unique value</td>
</tr>
<tr>
<td>Construct</td>
<td>let sb = Symbol()</td>
<td>let m = new Map([iteratble])</td>
<td>let s = new Set([iteratble])</td>
</tr>
<tr>
<td>Key-value</td>
<td>Description as ‘key’ <br>Symbol.keyFor(sb)</td>
<td>key=&gt;any type ordered <br>value=&gt;any type</td>
<td>key&lt;=&gt;value <br>unique key</td>
</tr>
<tr>
<td>Loop</td>
<td>N\A</td>
<td>For…of  forEach()</td>
<td>for…of forEach()</td>
</tr>
<tr>
<td>Transfer</td>
<td>sb.toString()</td>
<td>[…m] = Array.from(m)  &lt;=&gt; new Map(arr).</td>
<td>[…s] = Array.from(s)  &lt;=&gt; new Set(arr).</td>
</tr>
</tbody></table>
<h2 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a>Symbol</h2><blockquote>
<p>An unique ‘string’ that would never be equvlient to others</p>
</blockquote>
<ul>
<li><p>primitive data type</p>
</li>
<li><p><code>Symbol(&lt; description &gt;)</code> function returns an anonymous, unique value</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Symbol</span>(<span class="string">'foo'</span>) === <span class="built_in">Symbol</span>(<span class="string">'foo'</span>)  <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p>This functon has its static propertise and methods</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sb = <span class="built_in">Symbol</span>.for(<span class="string">'foo'</span>)</span><br><span class="line"><span class="keyword">let</span> sb2= <span class="built_in">Symbol</span>.for(<span class="string">'foo'</span>) <span class="comment">//saved the value in global env in the memory</span></span><br><span class="line">sb ===sb2<span class="comment">//true</span></span><br><span class="line"><span class="built_in">Symbol</span>.keyFor(sb) <span class="comment">//'foo'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Not <code>new Symbol()</code>  ❌</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sym = <span class="keyword">new</span> <span class="built_in">Symbol</span>()  <span class="comment">// TypeError</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sym = <span class="built_in">Symbol</span>(<span class="string">'foo'</span>)</span><br><span class="line"><span class="keyword">typeof</span> sym      <span class="comment">// "symbol" </span></span><br><span class="line"><span class="keyword">let</span> symObj = <span class="built_in">Object</span>(sym)</span><br><span class="line"><span class="keyword">typeof</span> symObj   <span class="comment">// "object"</span></span><br></pre></td></tr></table></figure>

<p>But it has instance/prototype properties and methods</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Symbol</span>.prototype.toString()</span><br><span class="line"> <span class="keyword">let</span> sb = <span class="built_in">Symbol</span>(<span class="string">'context'</span>);</span><br><span class="line"> <span class="built_in">console</span>.log(sb.description); <span class="comment">//context</span></span><br></pre></td></tr></table></figure>

<p>Returns a string containing the description of the Symbol. Overrides the Object.prototype.toString() method.</p>
</li>
</ul>
<h3 id="Use-cases"><a href="#Use-cases" class="headerlink" title="Use cases"></a>Use cases</h3><p>To dealing with the same string name, use symbol to create unique value;</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user1= &#123;</span><br><span class="line">	name:<span class="string">'Jack'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> user2 = &#123;</span><br><span class="line">    name:<span class="string">'Jack'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> data = &#123;</span><br><span class="line">    [user1]:&#123;<span class="attr">age</span>:<span class="number">19</span>&#125;,</span><br><span class="line">    [user2]:&#123;<span class="attr">age</span>:<span class="number">22</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(data[user1]) <span class="comment">//&#123;age: 22&#125;</span></span><br></pre></td></tr></table></figure></p>
      <div class="post-button"><a class="btn" href="/2020/06/15/es6ds/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2020/06/12/inheritance-0/">inheritance</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2020-06-12</span>
      <p><h1 id="Inheritance-of-Object-in-JS"><a href="#Inheritance-of-Object-in-JS" class="headerlink" title="Inheritance of Object in JS"></a>Inheritance of Object in JS</h1><div class="note warning">
            <h3 id="Disclaimer"><a href="#Disclaimer" class="headerlink" title="Disclaimer"></a>Disclaimer</h3><p>This article is originally based on my understanding of this concept. No guarantee on the accuracy.😅</p>
          </div>

<h2 id="Prototype-chain"><a href="#Prototype-chain" class="headerlink" title="Prototype chain"></a>Prototype chain</h2><p>Let subType’s prototype points to an instance of the superType;</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SubType.prototype= <span class="keyword">new</span> SuperType()</span><br></pre></td></tr></table></figure>

<p>Problems:</p>
<ul>
<li>The instance property of SuperType becoms the shared prototype property for SubType</li>
<li>There is no way to pass arguments to the constructor of superType</li>
</ul>
<h2 id="Constructor-stealing"><a href="#Constructor-stealing" class="headerlink" title="Constructor stealing"></a>Constructor stealing</h2><p>Calling the constructor of supertype inside the constructor of subtype.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params">...arg</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//now it's avaliable to pass arguments to supertype</span></span><br><span class="line"> 	SuperType.call(<span class="keyword">this</span>,arg)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Problems:</p>
<ul>
<li>No access for Subtype to the prototype method/properties of the SuperType</li>
<li>The methods are defined inside the constructor which makes them instance method. Not shared with all instances;</li>
</ul>
<h2 id="Combination-inheritance"><a href="#Combination-inheritance" class="headerlink" title="Combination inheritance"></a>Combination inheritance</h2><p>Prototype chain + constructor stealing</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span> (<span class="params">..args</span>)</span>&#123;</span><br><span class="line">	SuperType.call(<span class="keyword">this</span>,args)</span><br><span class="line">&#125;</span><br><span class="line">SubType.prototype = <span class="keyword">new</span> SuperType()</span><br><span class="line">SubType.prototype.constructor =Subtype;</span><br></pre></td></tr></table></figure>

<p>Problems:</p>
<ul>
<li>The constructor function always be called twice during the inheritance;</li>
</ul>
<h2 id="Prototypal-inheritance"><a href="#Prototypal-inheritance" class="headerlink" title="Prototypal inheritance"></a>Prototypal inheritance</h2><p>The constructor is not necessary to perform inheritance. It simply can be done by a object itself.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.create()</span><br><span class="line"><span class="built_in">Object</span>.prototype.create=<span class="function">(<span class="params">prototype</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line">    <span class="comment">//points the prototype to the argument (an object)</span></span><br><span class="line">    F.prototype = prototype;</span><br><span class="line">    <span class="comment">//return the instance of the temp constructor</span></span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> F()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> Person = &#123;<span class="attr">greeting</span>:<span class="string">'Hello'</span>&#125;</span><br><span class="line"><span class="keyword">let</span> Student =<span class="built_in">Object</span>.create(Person)</span><br></pre></td></tr></table></figure>

<p>Inheritance using constructor:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SubType &#x3D; Object(SuperType.prototype)</span><br></pre></td></tr></table></figure>

<h2 id="Parasitic-inheritance"><a href="#Parasitic-inheritance" class="headerlink" title="Parasitic inheritance"></a>Parasitic inheritance</h2><p>Create a function only focus on encapsulation</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parasitic</span>(<span class="params">prototype</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">let</span> object = <span class="built_in">Object</span>.create(prototype);</span><br><span class="line">    object.method=<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> object;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">super</span> = &#123;<span class="attr">name</span>:<span class="string">'super'</span>&#125;</span><br><span class="line"><span class="keyword">let</span> obj1= parasitic(<span class="keyword">super</span>);</span><br><span class="line"><span class="keyword">let</span> obj2=parasitic(<span class="keyword">super</span>);</span><br><span class="line">obj1.method !=obj2.method;</span><br></pre></td></tr></table></figure>

<p>Problems:</p>
<ul>
<li>The methods are not shared with instances;</li>
</ul>
<h2 id="Parasitic-combination"><a href="#Parasitic-combination" class="headerlink" title="Parasitic combination"></a>Parasitic combination</h2><p>For combination inheritance, the constructor function was called twice.</p>
<p>The instance property of superType were created first to be the prototype property of subtype, (SubType.prototype = new Super())</p>
<p>then created as iinstance properties.(inside the constructor)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inheritance</span>(<span class="params">subType,superType</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> prototype=<span class="built_in">Object</span>.create(superType.prototype);</span><br><span class="line">    prototype.construcotr = subType;</span><br><span class="line">    subType.prototype=prototype;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Mixing-inheritance"><a href="#Mixing-inheritance" class="headerlink" title="Mixing inheritance"></a>Mixing inheritance</h2><p>JS dosen’t support multiple inheritance, but method of different class/object can be borrowed by mixing</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> Student =&#123;</span><br><span class="line">	study(book)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'read'</span>+book)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.greeting=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> jack = <span class="keyword">new</span> Person(<span class="string">'jack'</span>)<span class="comment">//jack Person &#123;name:'jack'&#125;</span></span><br><span class="line">Obejct.assign(jack,Student);<span class="comment">//jack Person &#123;name: "jack", greeting: ƒ, study: ƒ&#125;</span></span><br></pre></td></tr></table></figure>

</p>
      <div class="post-button"><a class="btn" href="/2020/06/12/inheritance-0/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2020/06/08/browser-rendering/">browser rendering</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2020-06-08</span>
      <p><h1 id="Browser-rendering"><a href="#Browser-rendering" class="headerlink" title="Browser rendering"></a>Browser rendering</h1><div class="note warning">
            <h3 id="Disclaimer"><a href="#Disclaimer" class="headerlink" title="Disclaimer"></a>Disclaimer</h3><p>This article is originally based on my understanding of this concept. No guarantee on the accuracy.😅</p>
          </div>

<p>Few key points:</p>
<ul>
<li>The parsing and creation of DOM tree and CSSOM tree is independent. </li>
<li>The render tree can only be created when both CSSOM and DOM tree are ready.</li>
</ul>
<img src="/.com//browser rendering-Page-1.png" alt="browser rendering-Page-1" style="zoom:50%;">

<ul>
<li><p>The  sync &lt; script &gt; tag would block the building of DOM tree, because:</p>
<ul>
<li>the Javscript has to wait the CSSOM tree to be built since it may need to manuplate or get information about the sytle. And the DOM tree has to stopped since it not sure if the js would interact with the DOM tree.</li>
<li>So the CSSOM tree keeps building. When the CSSDOM tree finishes, the browser starts to parse js and execute it.</li>
<li>If the script is trying to manipulate any dom element that hasn’t be created, it would fail. So normally the script tag was put at the end of the body tag.</li>
<li>Then the DOM tree re-start to build.</li>
<li>The mordern browser allows the rendering to perform bits by bits.</li>
</ul>
<p>![browser rendering-Page-2](browser-rendering/browser rendering-Page-2.png)</p>
</li>
<li><p>To shorten the time before the first-screen-rendering, it’s better to make the scirpt tag <code>async</code> </p>
</li>
<li><p>Now the parsing of CSS and html can again performs parallelly.</p>
</li>
</ul>
<img src="/.com//browser rendering-Page-3.png" alt="browser rendering-Page-3" style="zoom:67%;"></p>
      <div class="post-button"><a class="btn" href="/2020/06/08/browser-rendering/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2020/06/01/debounce-throttle/">debounce & throttle</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2020-06-01</span>
      <p><div class="note warning">
            <h3 id="Disclaimer"><a href="#Disclaimer" class="headerlink" title="Disclaimer"></a>Disclaimer</h3><p>This article is originally based on my understanding of this concept. No guarantee on the accuracy.😅</p>
          </div>

<h2 id="Throttle"><a href="#Throttle" class="headerlink" title="Throttle"></a>Throttle</h2><img src="/.com//Untitled Diagram-Page-2.png" alt="throttle" style="zoom:80%;">

<p>Throttle is used to limit how often a function can be called, though throttle is simpler to implement</p>
<p>Using a flag to record the state: within or exceed the time limit</p>
<p>Use case: during scrolling, resizing</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> throttle = <span class="function">(<span class="params">fn, limit</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> flag = <span class="literal">false</span>; <span class="comment">//init the flag</span></span><br><span class="line">        <span class="keyword">return</span> <span class="function">(<span class="params">...arg</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (!flag) &#123; <span class="comment">//if the flag is false, exceeds the limit</span></span><br><span class="line">            fn(arg); <span class="comment">//run the passed in function</span></span><br><span class="line">            flag = <span class="literal">true</span>; <span class="comment">//turn the flog to ture, still inside the limit</span></span><br><span class="line">           setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123; <span class="comment">//use a timer to turn flag to false after the limit</span></span><br><span class="line">            flag = <span class="literal">false</span>;</span><br><span class="line">          &#125;, limit);</span><br><span class="line">          &#125;</span><br><span class="line">  			<span class="comment">//if the flag was true, do nothing.</span></span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br></pre></td></tr></table></figure>



<h2 id="Debounce"><a href="#Debounce" class="headerlink" title="Debounce"></a>Debounce</h2><img src="/.com//Untitled Diagram-Page-1.png" alt="debounce" style="zoom:80%;">



<p>A debounced function is called only once in a given period, delay milliseconds after its last invocation (the timer is reset on every call).</p>
<p>use case: auto search</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> debounce = <span class="function">(<span class="params">fn, limit</span>) =&gt;</span> &#123;</span><br><span class="line">   <span class="keyword">let</span> id; </span><br><span class="line">   <span class="keyword">return</span> <span class="function">(<span class="params">...arg</span>) =&gt;</span> &#123;</span><br><span class="line">     <span class="keyword">if</span> (id) clearTimeout(id); <span class="comment">//every time the function was called, test if the the timer is running, if so, restart the timer</span></span><br><span class="line">     id = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123; </span><br><span class="line">       fn(arg);</span><br><span class="line">     &#125;, limit);</span><br><span class="line">   &#125;;</span><br><span class="line"> &#125;;</span><br></pre></td></tr></table></figure>

</p>
      <div class="post-button"><a class="btn" href="/2020/06/01/debounce-throttle/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>


<div id="pagination">
  <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"></a>
</div>

<footer>
  <div>
    Copyright &copy; 2020<a href="/"> Brushes & Keys</a><br>Powered by <a
      href="https://hexo.io" target="_blank">Hexo</a> | Theme <a href="https://lx.js.org" target="_blank">Lx</a> |
    Modified by
    Nan Chen <br> Find me at <a href="https://github.com/southchen" target="_blank" rel="noopener">GitHub</a> <a
      href="https://instagram.com/divetothesea">Instagram</a> <a href="https://www.behance.net/southchen" target="_blank" rel="noopener">Behance</a>
    <br>
  </div>
</footer>

  </div>
</div>
</div>

  <button class="hamburger hamburger--arrow-r" type="button">
    <div class="hamburger-box">
      <div class="hamburger-inner"></div>
    </div>
  </button>
  <div class="menu visibility">
  <div class="menu-head">
    <span class="layer">
      <div class="col">
        <div class="row for-pic">
          <div class="profile-pic">
            <a href="/"><img src="https://avatars0.githubusercontent.com/u/26827800?s=460&u=59259f6cb361b7fba376e3ae0c589ccc1639c8b4&v=4" alt="Nan Chen"/></a>
          </div>
        </div>
        <div class="row for-name">
          <p>Nan Chen</p>
          <span class="tagline">Not a Number 😆</span>
        </div>
      </div>
    </span>
  </div>
  <nav class="menu-container">
  <ul class="menu-items">
    <li><a href="/"><i class="fa fa-home fa-fw"></i>Home</a></li>
    <li><a href="/archives/"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
    
    <li class="has-sub"><span class="dropdown-heading">
      <i class="fa fa-bookmark fa-fw"></i>Pages</span>
        <ul>
          <li><a href="/about">About</a></li>
        </ul>
    </li>
    <li class="has-sub"><span class="dropdown-heading">
      <i class="fa fa-link fa-fw"></i>Friends</span>
        <ul>
          <li> <a href="https://lx.js.org" target="_blank">Theme-Lx</a></li>
        </ul>
    </li>
  </ul>
  </nav>
</div>

  <div class="gototop js-top">
    <a href="#" class="js-gotop"><i class="fa fa-arrow-up"></i></a>
  </div>
  <script src="//cdn.jsdelivr.net/npm/theme-lx@0.3.9/source/js/jquery.easing.min.js"></script>
  <script>
    (function () {
      "use strict";
      var goToTop = function () {
        $(".js-gotop").on("click", function (event) {
          event.preventDefault();
          $("html, body").animate({
            scrollTop: $("html").offset().top
          }, 500, "easeInOutExpo");
          return false;
        });
        $(window).scroll(function () {
          var $win = $(window);
          if ($win.scrollTop() > 200) {
            $(".js-top").addClass("active");
          } else {
            $(".js-top").removeClass("active");
          }
        });
      };
      $(function () {
        goToTop();
      });
    }());

  </script>
  


</body>

</html>
